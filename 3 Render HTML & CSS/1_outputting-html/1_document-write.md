# document.write

## 3.1.1 Using document.write

The simplest way to output HTML to the publisher’s page is by using document.write.
This function takes a string as input and outputs it as HTML to the document stream.
This means that the HTML is output at the point at which the browser encounters
the call to document.write. It only works in conjunction with a standard (blocking)
script include, because the browser needs to block further page processing to wait
for your document.write call to finish outputting. If it didn’t wait, document.write
would output to wherever the browser was processing the page at that moment, and
the result could be a mislocated widget, malformed HTML, or even a completely
empty document.1

1 Attempting to call document.write after the page has already loaded will actually empty the DOM, present-
ing the user with a blank page. Needless to say, it can be destructive if not wielded properly.

So, if you were distributing the Camera Stork widget using a standard script
include, you’d do something like this:

`<script src="http://camerastork.com/widget.js?product=1337"></script>`

Your application code could use document.write to output your widget HTML to the
publisher’s page:

```html
document.write( '
<div>
  ' + '
  <h3>Mikon E90 Digital SLR</h3>
  ' + ' <img src="http://camerastork.com/img/1337-small.jpg" />' + '
  <p>$599.99</p>
  ' + '
  <p>4.3/5.0 &bull; 176 Reviews</p>
  ' + '
</div>
' );
```

If this looks familiar, it should. You used document.write like this in the first widget
example from chapter 1.
But using document.write is actually not advisable as a technique for rendering on
the publisher’s page. This is because it depends on a standard blocking script include,
which, as you learned in the previous chapter, isn’t recommended for third-party
scripts. Blocking scripts can prevent the publisher’s page from processing, which can
cause serious performance issues for publishers if your script files load slowly or—
worse yet—become unavailable. Instead, we advised that you use asynchronous script

loading techniques (like dynamically inserting a script DOM element), which unfortu-
nately can’t be used in conjunction with document.write.

This doesn’t mean document.write is without value. As you’ll see later in this chap-
ter, it can be a powerful tool in a number of different contexts. But for the immediate

problem of rendering on the publisher’s DOM, we’ll need a different approach—one
that doesn’t necessitate blocking the browser.

---

### From [[_1_outputting-html]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[_1_outputting-html]: _1_outputting-html "Outputting HTML"
[//end]: # "Autogenerated link references"
