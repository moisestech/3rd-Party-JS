# Src Less iFrames

## 3.4.1 Src-less iFrames

When you create an iframe without setting its src attribute, you’re creating what we
refer to as a blank or src-less iframe. Src-less iframes are powerful in that they contain a
separate window and DOM environment, and scripts executing on the parent page
can directly access these objects. That means you can populate the iframe’s contents
with HTML and CSS directly from your third-party script, but still benefit from their
immunity to inheriting styles from the parent page.
To gain access to the iframe’s DOM, you’ll use the iframe element’s contentWindow
property. This example writes HTML directly into the src-less iframe’s body, using our
old friend document.write:
var doc = iframe.contentWindow.document;
doc.write(
'<style> /_ ... _/ </style>' +
'<div>' +
' <h3>Mikon E90 Digital SLR</h3>' +
' <img src="http://camerastork.com/img/1337-small.jpg"/>' +
' <p>$599.99</p>' +
' <p>4.3/5.0 &bull; 176 Reviews</p>' +
'</div>'
);
doc.close();

You’re probably thinking to yourself, “Wait a minute—isn’t document.write bad?”
Iframes are processed by the browser asynchronously, so even if there are blocking
operations (like document.write) inside your iframe body, they won’t cause the
browser to stop processing the parent page. There’s one caveat. Iframes can still block
the parent page’s onload event, because the parent page waits for the onload event of
all child windows before firing. This means that any long-loading resources inside the
iframe could delay this event, possibly affecting the parent page. But fear not—calling
document.close() inside the iframe after you’re done rendering forces the onload
event to fire, circumventing this behavior.

You’ll also notice that, in this example, the namespaced IDs and classes we intro-
duced in the last section are gone. This is because iframes can’t inherit style rules or

be accidentally queried from the parent page, so you’re free to use whatever attributes
you prefer.
Src-less iframes are a powerful way to present content in a way that can’t accidentally
conflict with the parent page. But if you can access the iframe’s contents from your
third-party script, so can the publisher. This means that they can write JavaScript code

to access your iframe’s content and change it to their liking. That could mean inject-
ing CSS directly into the iframe, or modifying the DOM elements in some way.

Depending on the objectives of your application, you might be comfortable permit-
ting the publisher access to your application’s contents. But if your application con-
tains sensitive information, or is connected with a well-known brand and shouldn’t be

modified, there’s an alternate approach to using iframes that makes them practically
impenetrable.3

**iFrames and quirks mode in Internet Explorer**
If you’ve never encountered quirks mode, consider yourself blessed. It’s the name

given to Internet Explorer’s rendering mode in versions 5 and earlier, before IE imple-
mented the official W3C CSS box model specification. IE6 and later by default use

standards mode, which is the rendering mode you’re familiar with. But for backward
compatibility, even the latest versions of IE are capable of rendering in quirks mode,
and web pages can force the browser to use this rendering mode by omitting a valid
DOCTYPE declaration. Most often, web pages render quirks mode by accident, either
by forgetting to include a DOCTYPE, or by declaring the DOCTYPE incorrectly.3
Because you’re in the business of rendering on publishers’ web pages, you may
encounter a website using quirks mode. In this case, your application will likely render

incorrectly, because you’ve almost certainly been implementing your CSS using stan-
dards mode.

Unfortunately, iframes are not immune to the effects of quirks mode. Despite docu-
ments inside iframes having their own DOCTYPE declaration, IE9 will render iframed

content differently if the parent document is in quirks mode. To counter this, some

(continued)
developers have had luck using the HTML5 Shiv library, which restores some sanity
to IE9 when under the effects of quirks mode.4

Our advice: just be mindful of quirks mode, and its possible impact on your applica-
tion. The good news is that very few websites render in quirks mode, and they’re prob-
ably already styled poorly to begin with!

---

### From [[_4_embed-iframes]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[_4_embed-iframes]: _4_embed-iframes "Embed iFrames"
[//end]: # "Autogenerated link references"
