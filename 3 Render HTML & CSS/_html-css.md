# 3️⃣ HTML & CSS

## **This Chapter Covers**

1. Outputting HTML to the publisher’s page
2. Methods for loading styles
3. Writing conflict-free HTML and CSS
4. Techniques for presenting content using iFrames

## **Intro**

In the previous chapter, you learned how to load your third-party JavaScript code
on the publisher’s page, load supporting JavaScript files, and pass parameters from
the publisher’s page to your script. At this point, there’s still nothing to see; your

code is executing on the publisher’s page, but you haven’t added a single visual ele-
ment to the DOM. It’s time to fix that. In this chapter, we’ll cover the steps involved

in actually rendering HTML and CSS on the publisher’s page.
Now, not all third-party scripts will make use of rendering. Analytics trackers,
web service API wrappers, and other passive scripts won’t require any rendering at
all. In those cases, most of the content in this chapter might not apply. But in the
case of the Camera Stork product widget, there won’t be much of an application if
users can’t see it.

As a third-party script, rendering is trickier than you might think. Just getting
markup on the page can have significant performance problems if not done correctly.
Additionally, you’ve got to share the DOM with the publisher’s regular content, and
possibly other third-party scripts. You also have to think about how the publisher’s
own CSS rules will interact with yours; you might want your widget to inherit the
page’s look and feel, or you might want it to look consistent across every website.
But hey, we have you covered. In this chapter, we’ll guide you through the steps of
rendering the graphical elements of your third-party application on the publisher’s
page. We’ll start with getting raw HTML onto the DOM, and then move into styling that
HTML. Afterward, we’ll examine HTML and CSS authoring best practices, and explore
how iframes can be used to protect your content from conflicting styles and scripts.

## **3.1 Outputting HTML**

[[1_outputting-html]]

## **3.2 Styling your HTML**

[[2_styling-html]]

## **3.3 Defensive HTML & CSS**

[[3_defensive-html-css]]

## **3.4 Embedding Content in iFrames**

[[4_embed-iframes]]

## **3.5 Summary**

- For a third-party JavaScript application, **injecting HTML and CSS into the publisher’s page requires more care than if you were adding markup to a “safe” environment**.
- You must **make sure that when outputting HTML to the page, you aren’t slowing down the page with a blocking operation**.
- You also have to **consider that your script might get included multiple times on the same page**, **and it should render multiple instances gracefully**.
- Additionally, you should **choose an optimal method for injecting CSS into the publisher’s page**
- either by
  - **inlining all your styles**
  - **appending link elements**
  - **or embedding CSS rules in your JavaScript**.
- But just getting HTML and CSS on the page isn’t enough.
- You **have to recognize that elements you introduce to the DOM can conflict with the parent page**.
- You also must **consider how your styles might conflict with existing styles defined by the publisher**.
- You can use a number of techniques for reducing the impact of parent styles on your widget:
  - by **overspecifying your CSS rules **
  - or presenting your **content behind an iframe, whether it’s a src-less iframe**
  - or one that **contains an external HTML document**.

#### Project Widget

- To recap where we are with the Camera Stork widget: at this point,
  - you should have a fully styled version of the widget loading on the publisher’s page that looks something like the example from figure 3.3.
- You want to maintain a consistent look and feel across every website, and customization is not a concern, so you’re rendering the widget’s contents inside of an iframe.

#### Next Chapter

[[_server-com]]

- The widget itself is still pretty static; it outputs up-to-date product information for a given product, but doesn’t capture or process any input from the user, like ratings or written reviews.
- To do that, you’ll have to learn how to communicate with the server, which is the topic of our next chapter.

---

[//begin]: # "Autogenerated link references for markdown compatibility"
[_server-com]: ../4 Server Communication/_server-com "4️⃣ Server Com"
[//end]: # "Autogenerated link references"
