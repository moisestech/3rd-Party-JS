# IE Sub-domain Proxies

## ** 4.3.4 Internet Explorer and subdomain proxies**

Of course, when you’re dealing with Internet Explorer, nothing is as easy as it should
be. IE8 has an odd bug that prevents a top-level domain from communicating with its
subdomain even when they both opt in to a common domain namespace.
Let’s say you have two pages—hosted on example.com and sub.example.com—and

the latter opens the former in an iframe. You also want the iframed page to communi-
cate with its parent by calling a callback function using window.parent.callback().

Here’s the HTML for the page hosted at sub.example.com:

<!DOCTYPE html>
<html>
<head>
<script>
document.domain = 'example.com';
function callback() { /* ... */ }
</script>
</head>
<body>
<iframe src="http://example.com/"></iframe>
</body>
</html>
And here’s the HTML for the page hosted on example.com:
<!DOCTYPE html>
<html>
<script>
document.domain = 'example.com';
window.parent.callback();
</script>
</html>

This code works fine in Chrome, Firefox, Opera, and Internet Explorer 9. But IE8
raises a Permission Denied error when the child page tries to communicate with its
parent. Removing the document.domain part from the child doesn’t fix the issue and
doesn’t make a lot of sense, since both parties must opt in to the same origin in order
to be able to communicate with each other. The problem is that Internet Explorer 8

has a browser bug that prevents a top-level domain from communicating with its sub-
domains. Unfortunately, until Microsoft fixes it, there’s no known workaround.

What does this mean? In order to support IE8, subdomain proxies are only viable for
publisher websites that are also served from a subdomain. Often this isn’t a problem;
many websites are served from the standard www subdomain (www.publisher.com). And
if they aren’t, they can easily begin using the www subdomain by updating their DNS
records. All the same, this is another situation wherein subdomain proxies require the
cooperation of publishers in order to work effectively.

---

#### From [[_3_subdomain-proxies]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[_3_subdomain-proxies]: _3_subdomain-proxies "Subdomain Proxies"
[//end]: # "Autogenerated link references"
