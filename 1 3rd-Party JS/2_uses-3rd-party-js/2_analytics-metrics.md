## ** 1.2.2 Analytics and Metrics**

Third-party JavaScript isn’t used exclusively in the creation of embedded widgets.

There are other **uses that don’t necessarily involve graphical**, **interactive web page elements**.

Often they’re **silent scripts that process information on the publisher’s page** without the user ever knowing they’re there.  
The most common such use case is in **analytics and metrics gathering**.

One of **JavaScript’s most powerful features is that it enables developers to capture and respond to user events as they occur on a web page**.

For example, you can **write JavaScript to respond to a website visitor’s mouse movements and/or mouse clicks**.

Third-party scripts are no exception:
they too **can observe browser events and capture data about how the visitor interacts with the publisher’s page**.
This might include

1. tracking how long a visitor stays on a page before moving on,
2. what content they saw while they were reading the page,
3. and where they went afterward.

There are dozens of **browser events your JavaScript code can hook** into **from which you could derive hundreds of different insights**.

### **PASSIVE SCRIPTS**

**Crazy Egg**, another web startup, is one example of an organization that uses third-party scripts in this way.

- Their analytics product generates visualizations of user activity on your web page `(see figure 1.4)`.
- To obtain this data, Crazy Egg distributes a script to publishers that captures the mouse and scroll events of web page visitors.

This data is submitted back to Crazy Egg’s servers, all in the same script.  
The visualizations Crazy Egg generates help publishers identify which parts of their website are being accessed frequently, and which are being ignored.  
Publishers use this information to improve their web design and optimize their content.

**`Figure 1.4` Crazy Egg's hear map visualization highlights trafficked areas of publishers websites**

Crazy Egg’s third-party script is considered a **passive script**; it records statistical data without any interaction from the publisher.  
The publisher is solely responsible for including the script on the page.  
The rest happens automatically.

### **ACTIVE SCRIPTS**

Not all analytics scripts behave passively.
Mixpanel is an analytics company whose product tracks publisher-defined user actions to generate statistics about website visitors or application users.  
Instead of generic web statistics, like page views or visitors, Mixpanel has publishers define key application events they want to track.  
Some example events might be “user clicked the signup button,” or “user played a video.”  
Publishers write simple JavaScript code `(see listing 1.3)` to identify when the action takes place and then call a tracking method provided by Mixpanel’s third-party scripts to register the event with their service.  
Mixpanel then assembles this data into interesting funnel statistics to help answer questions like, “What series of steps do users take before upgrading the product?”

**Listing 1.4 Tracking user sighups with the Mixpanel JS API**

There’s something else interesting about Mixpanel’s use of third-party scripting. In actuality, Mixpanel provides a set of client-side functions that communicate with their web service API—a set of server HTTP endpoints that both track and report on events.

This is a practical use case that can be extended to any number of different services. Let’s learn more.

**Figure 1.3 An example commenting section on a pubglisher's website, powere by the Disques commenting widget**

Incredibly, all of this magic also comes in a widget flavor.
Publishers can embed the maps application on their own web pages using some simple JavaScript code snippets obtained from the Google Maps website. On top of this, Google provides a set of public functions for publishers to modify the map contents.

Let’s see how simple it is to embed an interactive map on your web page using Google Maps (listing 1.2). This code example begins by first pointing to the Maps JavaScript library using a simple script include. Then, when the body’s onload handler fires, you check whether the current browser is compatible, and if so, initialize a new map and center it at the given coordinates.1

We’re done, and all it took was roughly 10 lines of code—powerful stuff!

**Listing 1.2 Initializing the Google Maps Widget**

We just looked at two examples of embedded widgets. But really, any application idea is fair game for embedding on a publisher’s page. In our own travels, we’ve come across a wide variety of widgets: content management widgets, widgets that play real-time video, widgets that let you chat in real time with a customer support person, and so on. If you can dream it, you can embed it.

---

#### From [[_2_uses-3rd-party-js]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[_2_uses-3rd-party-js]: _2_uses-3rd-party-js "Uses of 3rd Party"
[//end]: # "Autogenerated link references"
