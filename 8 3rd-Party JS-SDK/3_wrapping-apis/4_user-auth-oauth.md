# User Auth, oAuth

## **8.3.4 User authorization and OAuth**

If you recall, the Camera Stork web service API that we defined earlier consisted
purely of methods that return public data: products and user reviews. Because this
data is available in HTML form on the public camerastork.com website, there’s no

great danger to exposing that data publicly in a form that’s easier to consume progra-
matically (JSON).

But what happens when you want to expose an API method that either fetches or
modifies private or otherwise sensitive data? Let’s suppose that you wanted to add an
endpoint to your API that allows publishers to submit reviews on behalf of users (see
table 8.2).

The final parameter listed, user_id, needs some explanation. Obviously it doesn’t
make sense for an arbitrary publisher to submit reviews on behalf of a user. If that
were the case, our friends at Mikon (totally a real camera company, we swear) would
create millions of reviews that are uncharacteristically positive regarding their camera

products. Needless to say, that would spell a quick end for camerastork.com’s credibil-
ity, and surely crater the business.

This also means that if a publisher uses the SDK to cause a visitor’s browser to make
a request to this endpoint, the API shouldn’t assume that the visitor’s existing session
(cookies) with camerastork.com authorizes the publisher to create a review on their
behalf. Otherwise, Mikon could merely host some JavaScript code on their web page
that loads your SDK and creates a new Camera Stork review whenever somebody
requests that page with their browser.
What you need is a way for the publisher to request authorization from the browser
user to perform actions on their behalf. Today, this is solved by OAuth, which is an
open standard for authorizing third parties to communicate with a web service. In the
briefest sense, OAuth describes a facility for providing publishers with endpoints that
issue private access tokens which encapsulate a user’s authorization to perform
actions on their behalf. These access tokens are then sent as parameters with a request
Table 8.2 A new addition to the Camera Stork API

**Figure 8.3 Facebook’s OAuth authorization page, where users can authorize API
applications to access their data or perform actions on their behalf**

to a web service API, which in turn treats the request as if it were being made by that
user. Figure 8.3 demonstrates a user-facing OAuth permission page, from which a
token is generated.
Unfortunately, OAuth is a complicated protocol that’s implemented primarily on
the server, which falls outside the scope of this book. But if you’re developing a web
service API that intends to expose or modify private user data, you owe it to yourself
(and your users) to research and implement OAuth. You can find out more on the
official OAuth homepage: http://oauth.net.

---

#### From [[_3_wrapping-apis]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[_3_wrapping-apis]: _3_wrapping-apis "Wraping APIs"
[//end]: # "Autogenerated link references"
