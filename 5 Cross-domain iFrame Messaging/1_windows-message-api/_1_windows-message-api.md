# Windows Message API

## **5.1 HTML5 window.postMessage API**

HTML5 window.postMessage is an effort to bring a safe, event-based cross-domain
messaging API to the browser. As you learned in chapter 4, the same-origin policy
doesn’t allow you to access properties from a page of different origin. This is because
that page has no way of knowing who’s accessing its properties; it could be a legitimate

user or a malicious website through a hidden iframe. The window.postMessage speci-
fication solves that problem by designing the system around events. That means

instead of directly accessing properties and methods of a document, you can send a
message to that document and then wait for a response. If the other party listens to
those messages and recognizes your particular message, it’ll process your request and
send a message back. This approach requires both parties to explicitly act in order to
establish a bidirectional communication channel, which eliminates attacks where a
malicious party accesses your document without your knowledge.
Figure 5.1 shows an example of two different postMessage requests. In one case,
the target recognizes the source, processes the message, and sends back a response.
But the second message is from an unrecognized source, so it gets ignored.
In this section, we’ll show you how to use the window.postMessage function to send
messages. We’ll also talk about attaching your own event handlers to the onmessage
event in order to process received messages. Afterward, we’ll discuss browser support
for window.postMessage and go over some limitations affecting Internet Explorer’s
implementation.

**Figure 5.1 An example of two messages from different sources being sent to the recipient. Recipient recognizes and processes only one source while ignoring the other.**

## **Sub-chapters**

- [[1_windows-message-api]]
- [[2_window_post-message]]
- [[3_browser-support]]

---

## From [[_cross-domain messaging]]

[//begin]: # "Autogenerated link references for markdown compatibility"
[_cross-domain messaging]: ../_cross-domain-messaging "5️⃣ Cross-Domain Messaging"
[//end]: # "Autogenerated link references"
